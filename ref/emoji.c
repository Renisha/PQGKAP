#include <stdio.h>

#include "emoji.h"

#define EMOJIS_LENGTH 333

static char* EMOJIS[EMOJIS_LENGTH] = {
  "😉","😍","😛","😭","😱","😡","😎","😴","😵","😈",
  "😬","😇","😏","👮","👷","💂","👶","👨","👩","👴",
  "👵","😻","😽","🙀","👺","🙈","🙉","🙊","💀","👽",
  "💩","🔥","💥","💤","👂","👀","👃","👅","👄","👍",
  "👎","👌","👊","✌","✋","👐","👆","👇","👉","👈",
  "🙏","👏","💪","🚶","🏃","💃","👫","👪","👬","👭",
  "💅","🎩","👑","👒","👟","👞","👠","👕","👗","👖",
  "👙","👜","👓","🎀","💄","💛","💙","💜","💚","💍",
  "💎","🐶","🐺","🐱","🐭","🐹","🐰","🐸","🐯","🐨",
  "🐻","🐷","🐮","🐗","🐴","🐑","🐘","🐼","🐧","🐥",
  "🐔","🐍","🐢","🐛","🐝","🐜","🐞","🐌","🐙","🐚",
  "🐟","🐬","🐋","🐐","🐊","🐫","🍀","🌹","🌻","🍁",
  "🌾","🍄","🌵","🌴","🌳","🌞","🌚","🌙","🌎","🌋",
  "⚡","☔","❄","⛄","🌀","🌈","🌊","🎓","🎆","🎃",
  "👻","🎅","🎄","🎁","🎈","🔮","🎥","📷","💿","💻",
  "☎","📡","📺","📻","🔉","🔔","⏳","⏰","⌚","🔒",
  "🔑","🔎","💡","🔦","🔌","🔋","🚿","🚽","🔧","🔨",
  "🚪","🚬","💣","🔫","🔪","💊","💉","💰","💵","💳",
  "✉","📫","📦","📅","📁","✂","📌","📎","✒","✏",
  "📐","📚","🔬","🔭","🎨","🎬","🎤","🎧","🎵","🎹",
  "🎻","🎺","🎸","👾","🎮","🃏","🎲","🎯","🏈","🏀",
  "⚽","⚾","🎾","🎱","🏉","🎳","🏁","🏇","🏆","🏊",
  "🏄","☕","🍼","🍺","🍷","🍴","🍕","🍔","🍟","🍗",
  "🍱","🍚","🍜","🍡","🍳","🍞","🍩","🍦","🎂","🍰",
  "🍪","🍫","🍭","🍯","🍎","🍏","🍊","🍋","🍒","🍇",
  "🍉","🍓","🍑","🍌","🍐","🍍","🍆","🍅","🌽","🏡",
  "🏥","🏦","⛪","🏰","⛺","🏭","🗻","🗽","🎠","🎡",
  "⛲","🎢","🚢","🚤","⚓","🚀","✈","🚁","🚂","🚋",
  "🚎","🚌","🚙","🚗","🚕","🚛","🚨","🚔","🚒","🚑",
  "🚲","🚠","🚜","🚦","⚠","🚧","⛽","🎰","🗿","🎪",
  "🎭","🇯🇵","🇰🇷","🇩🇪","🇨🇳","🇺🇸","🇫🇷","🇪🇸","🇮🇹","🇷🇺",
  "🇬🇧","1⃣","2⃣","3⃣","4⃣","5⃣","6⃣","7⃣","8⃣","9⃣",
  "0⃣","🔟","❗","❓","♥","♦","💯","🔗","🔱","🔴",
  "🔵","🔶","🔷"
};

long long bytesToLong(uint8_t* arr, int offset) {
	return (((long long) arr[offset] & 0x7F) << 56) | (((long long) arr[offset + 1] & 0xFF) << 48) | (((long long) arr[offset + 2] & 0xFF) << 40) | (((long long) arr[offset + 3] & 0xFF) << 32) |
			(((long long) arr[offset + 4] & 0xFF) << 24) | (((long long) arr[offset + 5] & 0xFF) << 16) | (((long long) arr[offset + 6] & 0xFF) << 8) | (((long long) arr[offset + 7] & 0xFF));
}

void emojify(uint8_t* key, char* emojified_key[4]) {
	for (int i = 0; i < 4; i++) {
    int index = (int) (bytesToLong(key, 8*i) % EMOJIS_LENGTH);
    emojified_key[i] = EMOJIS[index];
	}
}

void print_emojified_key(char* emojified_key[4]) {
  for (int i = 0; i < 4; i++) {
    printf("%s ", emojified_key[i]);
  }
  printf("\n");
}
